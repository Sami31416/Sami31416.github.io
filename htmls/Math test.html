<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathematics MCQ Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .instructions {
            background-color: #f0f7ff;
            padding: 15px 30px;
            border-bottom: 1px solid #e1e8f0;
            font-size: 0.95rem;
            color: #555;
        }
        
        .instructions i {
            color: #4a6491;
            margin-right: 8px;
        }
        
        .test-container {
            padding: 0;
        }
        
        .question-container {
            padding: 25px 30px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .question-number {
            display: inline-block;
            background-color: #4a6491;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            margin-right: 12px;
            font-weight: bold;
        }
        
        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: flex-start;
        }
        
        .math-display {
            font-size: 1.1rem;
            margin: 10px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 6px;
            overflow-x: auto;
        }
        
        .options-container {
            margin-left: 44px;
        }
        
        .option {
            margin-bottom: 12px;
            padding: 12px 15px;
            border: 2px solid #e1e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            background-color: #f5f9ff;
            border-color: #b8c7e0;
        }
        
        .option.selected {
            background-color: #e8f0ff;
            border-color: #4a6491;
        }
        
        .option.correct {
            background-color: #e7f7ef;
            border-color: #2ecc71;
        }
        
        .option.incorrect {
            background-color: #fdeded;
            border-color: #e74c3c;
        }
        
        .option-label {
            display: inline-block;
            width: 36px;
            height: 36px;
            background-color: #f0f4f9;
            border-radius: 50%;
            text-align: center;
            line-height: 36px;
            margin-right: 15px;
            font-weight: bold;
            color: #4a6491;
            flex-shrink: 0;
        }
        
        .option.selected .option-label {
            background-color: #4a6491;
            color: white;
        }
        
        .option.correct .option-label {
            background-color: #2ecc71;
            color: white;
        }
        
        .option.incorrect .option-label {
            background-color: #e74c3c;
            color: white;
        }
        
        .option-content {
            flex: 1;
        }
        
        .buttons-container {
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            background-color: #f9fbfd;
        }
        
        button {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #submitBtn {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
        }
        
        #submitBtn:hover {
            background: linear-gradient(135deg, #34495e, #5674a6);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        #resetBtn {
            background-color: #f0f4f9;
            color: #4a6491;
            border: 2px solid #d1d9e6;
        }
        
        #resetBtn:hover {
            background-color: #e4eaf3;
        }
        
        .results-container {
            padding: 30px;
            display: none;
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }
        
        .score-circle {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            background: linear-gradient(135deg, #2c3e50, #4a6491);
        }
        
        .score-value {
            font-size: 2.8rem;
        }
        
        .score-text {
            font-size: 1.1rem;
        }
        
        .result-item {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9fbfd;
            border-left: 4px solid #4a6491;
        }
        
        .result-item.correct {
            border-left-color: #2ecc71;
        }
        
        .result-item.incorrect {
            border-left-color: #e74c3c;
        }
        
        .result-question {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .result-answer {
            display: flex;
            margin-bottom: 8px;
        }
        
        .result-label {
            font-weight: 600;
            min-width: 120px;
        }
        
        .result-explanation {
            font-style: italic;
            color: #666;
            margin-top: 10px;
            padding: 10px;
            background-color: #f0f4f9;
            border-radius: 6px;
        }
        
        .summary {
            display: flex;
            justify-content: space-around;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
            flex: 1;
            min-width: 150px;
        }
        
        .summary-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #4a6491;
        }
        
        .summary-value.correct {
            color: #2ecc71;
        }
        
        .summary-value.incorrect {
            color: #e74c3c;
        }
        
        .summary-label {
            font-size: 0.95rem;
            color: #777;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .question-text {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .question-number {
                margin-bottom: 10px;
            }
            
            .options-container {
                margin-left: 0;
            }
            
            .buttons-container {
                flex-direction: column;
                gap: 15px;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-graduation-cap"></i> Mathematics MCQ Test</h1>
            <p class="subtitle">30 Questions | Algebra, Calculus, Geometry, and Physics</p>
        </header>
        
        <div class="instructions">
            <p><i class="fas fa-info-circle"></i> <strong>Instructions:</strong> Select one answer for each question. After completing all questions, click "Submit Test" to see your results with explanations.</p>
        </div>
        
        <div class="test-container" id="testContainer">
            <!-- Questions will be inserted here by JavaScript -->
        </div>
        
        <div class="buttons-container">
            <button id="resetBtn">
                <i class="fas fa-redo-alt"></i> Reset Test
            </button>
            <button id="submitBtn">
                <i class="fas fa-paper-plane"></i> Submit Test
            </button>
        </div>
        
        <div class="results-container" id="resultsContainer">
            <!-- Results will be inserted here by JavaScript -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script>
        // MCQ data with questions, options, correct answers, and explanations
        const mcqData = [
            {
                question: "If the matrix A = \\(\\begin{bmatrix} 2 & k \\\\ 4 & 6 \\end{bmatrix}\\) is singular, what is the value of k?",
                options: ["2", "3", "4", "6"],
                correct: 1,
                explanation: "A matrix is singular if its determinant is zero. \\(\\det(A) = (2)(6) - (k)(4) = 12 - 4k = 0 \\Rightarrow 4k = 12 \\Rightarrow k = 3\\)."
            },
            {
                question: "What is the square root of \\(-16 + 30i\\)?",
                options: ["\\(\\pm(3+5i)\\)", "\\(\\pm(5+3i)\\)", "\\(\\pm(5-3i)\\)", "\\(\\pm(3-5i)\\)"],
                correct: 0,
                explanation: "Let \\(\\sqrt{-16+30i} = a+bi\\). Squaring: \\((a^2 - b^2) + 2abi = -16+30i\\). Equating real and imaginary parts: \\(a^2 - b^2 = -16\\), \\(2ab = 30\\). Solving gives \\(a=3\\), \\(b=5\\) or \\(a=-3\\), \\(b=-5\\)."
            },
            {
                question: "If \\(\\omega\\) is a complex cube root of unity, what is the value of \\((1-\\omega)(1-\\omega^2)(1-\\omega^4)(1-\\omega^8)\\)?",
                options: ["9", "3", "0", "1"],
                correct: 0,
                explanation: "Since \\(\\omega^3=1\\), \\(\\omega^4=\\omega\\), \\(\\omega^8=\\omega^2\\). Also \\(1+\\omega+\\omega^2=0\\). The expression becomes \\((1-\\omega)(1-\\omega^2)(1-\\omega)(1-\\omega^2) = [(1-\\omega)(1-\\omega^2)]^2 = (1-\\omega-\\omega^2+\\omega^3)^2 = (1 - (\\omega+\\omega^2) + 1)^2 = (1 - (-1) + 1)^2 = (3)^2 = 9\\)."
            },
            {
                question: "Find the x-independent term in the expansion of \\((x^2 + \\frac{1}{x})^{12}\\).",
                options: ["495", "792", "220", "924"],
                correct: 0,
                explanation: "General term: \\(T_{r+1} = \\binom{12}{r} (x^2)^{12-r} (\\frac{1}{x})^r = \\binom{12}{r} x^{24-3r}\\). For x-independent term: \\(24-3r=0 \\Rightarrow r=8\\). Coefficient = \\(\\binom{12}{8} = \\binom{12}{4} = 495\\)."
            },
            {
                question: "If the roots of \\(x^2 - bx + c = 0\\) differ by 1, which relation holds?",
                options: ["\\(b^2 = 4c+1\\)", "\\(b^2 = 4c-1\\)", "\\(b^2 = c+4\\)", "\\(b^2 = c-4\\)"],
                correct: 0,
                explanation: "Let roots be \\(\\alpha\\) and \\(\\alpha+1\\). Sum = \\(2\\alpha+1 = b \\Rightarrow \\alpha = \\frac{b-1}{2}\\). Product = \\(\\alpha(\\alpha+1) = c\\). Substituting \\(\\alpha\\) gives: \\(\\frac{b-1}{2} \\cdot \\frac{b+1}{2} = c \\Rightarrow \\frac{b^2-1}{4} = c \\Rightarrow b^2 = 4c+1\\)."
            },
            {
                question: "Find the trace of the matrix \\(M = \\begin{bmatrix} 5 & 1 \\\\ 3 & -2 \\end{bmatrix}\\).",
                options: ["7", "3", "15", "-10"],
                correct: 1,
                explanation: "Trace of a matrix is the sum of its diagonal elements. For M, trace = \\(5 + (-2) = 3\\)."
            },
            {
                question: "Find the eccentricity of the ellipse \\(16x^2 + 25y^2 = 400\\).",
                options: ["\\(\\frac{3}{5}\\)", "\\(\\frac{4}{5}\\)", "\\(\\frac{9}{25}\\)", "\\(\\frac{5}{3}\\)"],
                correct: 0,
                explanation: "Divide by 400: \\(\\frac{x^2}{25} + \\frac{y^2}{16} = 1\\). Here \\(a^2=25\\) (\\(a=5\\)), \\(b^2=16\\) (\\(b=4\\)). For ellipse, \\(b^2 = a^2(1-e^2) \\Rightarrow 16 = 25(1-e^2) \\Rightarrow e^2 = \\frac{9}{25} \\Rightarrow e = \\frac{3}{5}\\)."
            },
            {
                question: "The focus of the parabola \\(y^2 = 12x\\) is:",
                options: ["\\((0, 3)\\)", "\\((3, 0)\\)", "\\((-3, 0)\\)", "\\((0, -3)\\)"],
                correct: 1,
                explanation: "For parabola \\(y^2=4ax\\), focus is \\((a,0)\\). Here \\(4a=12 \\Rightarrow a=3\\). So focus is \\((3,0)\\)."
            },
            {
                question: "Distance between the parallel lines \\(3x - 4y + 7 = 0\\) and \\(3x - 4y - 3 = 0\\) is:",
                options: ["2", "4", "10", "1"],
                correct: 0,
                explanation: "Distance between parallel lines \\(Ax+By+C_1=0\\) and \\(Ax+By+C_2=0\\) is \\(\\frac{|C_1-C_2|}{\\sqrt{A^2+B^2}}\\). Here \\(\\frac{|7 - (-3)|}{\\sqrt{3^2+4^2}} = \\frac{10}{5} = 2\\)."
            },
            {
                question: "The equation \\(x^2 + y^2 - 4x + 6y + 13 = 0\\) represents:",
                options: ["A Circle", "A Point", "An Ellipse", "A Parabola"],
                correct: 1,
                explanation: "Complete squares: \\((x^2-4x+4) + (y^2+6y+9) + 13-13=0 \\Rightarrow (x-2)^2+(y+3)^2=0\\). This represents a point \\((2,-3)\\)."
            },
            {
                question: "Polar coordinates of the point \\((1, \\sqrt{3})\\) are:",
                options: ["\\((2, \\frac{\\pi}{6})\\)", "\\((2, \\frac{\\pi}{3})\\)", "\\((\\sqrt{2}, \\frac{\\pi}{4})\\)", "\\((2, \\frac{2\\pi}{3})\\)"],
                correct: 1,
                explanation: "\\(r = \\sqrt{1^2+(\\sqrt{3})^2} = \\sqrt{4} = 2\\). \\(\\theta = \\tan^{-1}(\\frac{\\sqrt{3}}{1}) = \\tan^{-1}(\\sqrt{3}) = \\frac{\\pi}{3}\\). So polar coordinates: \\((2, \\frac{\\pi}{3})\\)."
            },
            {
                question: "The length of the latus rectum of \\(x^2 = -8y\\) is:",
                options: ["8", "2", "4", "-8"],
                correct: 0,
                explanation: "For parabola \\(x^2=4ay\\), length of latus rectum = \\(|4a|\\). Here \\(x^2=-8y = 4(-2)y \\Rightarrow a=-2\\). So \\(|4a| = 8\\)."
            },
            {
                question: "\\(\\lim_{x \\to 0} \\frac{\\sin 7x}{\\sin 3x} = ?\\)",
                options: ["\\(\\frac{7}{3}\\)", "\\(\\frac{3}{7}\\)", "1", "0"],
                correct: 0,
                explanation: "Using \\(\\lim_{x\\to 0} \\frac{\\sin(kx)}{kx} = 1\\), we have \\(\\frac{\\sin(7x)}{\\sin(3x)} = \\frac{7x}{3x} \\cdot \\frac{\\sin(7x)}{7x} \\cdot \\frac{3x}{\\sin(3x)} \\to \\frac{7}{3} \\cdot 1 \\cdot 1 = \\frac{7}{3}\\)."
            },
            {
                question: "If \\(y = \\ln(\\sin x)\\), then \\(\\frac{dy}{dx}\\) is:",
                options: ["\\(\\tan x\\)", "\\(\\cot x\\)", "\\(\\sec x\\)", "\\(\\cos x\\)"],
                correct: 1,
                explanation: "\\(\\frac{dy}{dx} = \\frac{1}{\\sin x} \\cdot \\cos x = \\frac{\\cos x}{\\sin x} = \\cot x\\)."
            },
            {
                question: "\\(\\int e^x (\\tan x + \\sec^2 x) \\, dx = ?\\)",
                options: ["\\(e^x \\sec^2 x\\)", "\\(e^x \\tan x\\)", "\\(e^x \\sec x\\)", "\\(\\tan x\\)"],
                correct: 1,
                explanation: "Notice that \\(\\frac{d}{dx} (e^x \\tan x) = e^x \\tan x + e^x \\sec^2 x = e^x (\\tan x + \\sec^2 x)\\). So the integral is \\(e^x \\tan x + C\\)."
            },
            {
                question: "Find the maximum value of \\(f(x) = \\sin x + \\cos x\\).",
                options: ["1", "2", "\\(\\sqrt{2}\\)", "\\(\\frac{1}{\\sqrt{2}}\\)"],
                correct: 2,
                explanation: "\\(f(x) = \\sqrt{2} \\sin(x + \\frac{\\pi}{4})\\). Maximum value of \\(\\sin\\) is 1, so maximum of \\(f(x)\\) is \\(\\sqrt{2}\\)."
            },
            {
                question: "\\(\\int_0^{\\pi/2} \\sin^2 x \\, dx = ?\\)",
                options: ["\\(\\frac{\\pi}{2}\\)", "\\(\\frac{\\pi}{4}\\)", "1", "0"],
                correct: 1,
                explanation: "Using \\(\\sin^2 x = \\frac{1-\\cos 2x}{2}\\), \\(\\int_0^{\\pi/2} \\sin^2 x \\, dx = \\int_0^{\\pi/2} \\frac{1-\\cos 2x}{2} \\, dx = \\left[\\frac{x}{2} - \\frac{\\sin 2x}{4}\\right]_0^{\\pi/2} = \\frac{\\pi}{4}\\)."
            },
            {
                question: "The slope of the tangent to \\(y = x^2\\) at \\((1, 1)\\) is:",
                options: ["1", "2", "0", "-2"],
                correct: 1,
                explanation: "\\(\\frac{dy}{dx} = 2x\\). At \\(x=1\\), slope = \\(2(1) = 2\\)."
            },
            {
                question: "\\(\\int \\frac{1}{x} \\, dx = ?\\)",
                options: ["\\(\\frac{x^2}{2}\\)", "\\(\\ln|x|\\)", "\\(-\\frac{1}{x^2}\\)", "\\(e^x\\)"],
                correct: 1,
                explanation: "Standard integral: \\(\\int \\frac{1}{x} \\, dx = \\ln|x| + C\\)."
            },
            {
                question: "Value of \\(\\cos 15^\\circ\\) is:",
                options: ["\\(\\frac{\\sqrt{3}+1}{2\\sqrt{2}}\\)", "\\(\\frac{\\sqrt{3}-1}{2\\sqrt{2}}\\)", "\\(\\frac{1-\\sqrt{3}}{2\\sqrt{2}}\\)", "\\(\\frac{1}{2}\\)"],
                correct: 0,
                explanation: "\\(\\cos 15^\\circ = \\cos(45^\\circ-30^\\circ) = \\cos 45^\\circ\\cos 30^\\circ + \\sin 45^\\circ\\sin 30^\\circ = \\frac{\\sqrt{2}}{2} \\cdot \\frac{\\sqrt{3}}{2} + \\frac{\\sqrt{2}}{2} \\cdot \\frac{1}{2} = \\frac{\\sqrt{6}+\\sqrt{2}}{4} = \\frac{\\sqrt{3}+1}{2\\sqrt{2}}\\)."
            },
            {
                question: "Resultant of two forces \\(3P\\) and \\(4P\\) acting at \\(90^\\circ\\) is:",
                options: ["\\(7P\\)", "\\(P\\)", "\\(5P\\)", "\\(25P\\)"],
                correct: 2,
                explanation: "For perpendicular forces, resultant \\(R = \\sqrt{(3P)^2 + (4P)^2} = \\sqrt{9P^2+16P^2} = \\sqrt{25P^2} = 5P\\)."
            },
            {
                question: "A projectile is fired at \\(45^\\circ\\). Its horizontal range \\(R\\) and maximum height \\(H\\) are related by:",
                options: ["\\(R=H\\)", "\\(R=2H\\)", "\\(R=4H\\)", "\\(H=4R\\)"],
                correct: 2,
                explanation: "At \\(45^\\circ\\), range \\(R = \\frac{u^2}{g}\\), maximum height \\(H = \\frac{u^2}{4g}\\). So \\(R = 4H\\)."
            },
            {
                question: "Angle between two equal forces \\(P\\) when their resultant is also \\(P\\):",
                options: ["\\(60^\\circ\\)", "\\(90^\\circ\\)", "\\(120^\\circ\\)", "\\(180^\\circ\\)"],
                correct: 2,
                explanation: "For equal forces \\(P\\) with resultant \\(P\\): \\(P = \\sqrt{P^2+P^2+2P^2\\cos\\theta} = \\sqrt{2P^2(1+\\cos\\theta)}\\). Squaring: \\(P^2 = 2P^2(1+\\cos\\theta) \\Rightarrow 1 = 2(1+\\cos\\theta) \\Rightarrow \\cos\\theta = -\\frac{1}{2} \\Rightarrow \\theta = 120^\\circ\\)."
            },
            {
                question: "A car starts from rest with acceleration \\(2 \\, m/s^2\\). Distance covered in 5 seconds is:",
                options: ["10 m", "25 m", "50 m", "100 m"],
                correct: 1,
                explanation: "Using \\(s = ut + \\frac{1}{2}at^2\\), with \\(u=0\\), \\(a=2 \\, m/s^2\\), \\(t=5s\\): \\(s = 0 + \\frac{1}{2}(2)(25) = 25 \\, m\\)."
            },
            {
                question: "The velocity of a particle is given by \\(v = 3t^2 + 2t\\). Its acceleration at \\(t=1s\\) is:",
                options: ["\\(8 \\, m/s^2\\)", "\\(6 \\, m/s^2\\)", "\\(5 \\, m/s^2\\)", "\\(10 \\, m/s^2\\)"],
                correct: 0,
                explanation: "Acceleration \\(a = \\frac{dv}{dt} = 6t + 2\\). At \\(t=1\\), \\(a = 6(1) + 2 = 8 \\, m/s^2\\)."
            },
            {
                question: "If \\(A = \\{1, 2\\}\\) and \\(B = \\{2, 3\\}\\), then \\(A \\cup B\\) has how many subsets?",
                options: ["4", "8", "16", "3"],
                correct: 1,
                explanation: "\\(A\\cup B = \\{1,2,3\\}\\) has 3 elements. Number of subsets of a set with \\(n\\) elements is \\(2^n\\). So \\(2^3 = 8\\)."
            },
            {
                question: "Value of \\(i^{402}\\) is:",
                options: ["1", "-1", "\\(i\\)", "\\(-i\\)"],
                correct: 1,
                explanation: "\\(i^{402} = i^{4\\times100 + 2} = (i^4)^{100} \\times i^2 = (1)^{100} \\times (-1) = -1\\)."
            },
            {
                question: "Modulus of \\(z = 3 - 4i\\) is:",
                options: ["7", "1", "5", "25"],
                correct: 2,
                explanation: "Modulus \\(|z| = \\sqrt{3^2 + (-4)^2} = \\sqrt{9+16} = \\sqrt{25} = 5\\)."
            },
            {
                question: "Which one is a unit vector?",
                options: ["\\(\\hat{i}+\\hat{j}\\)", "\\(\\frac{1}{\\sqrt{2}}(\\hat{i}+\\hat{j})\\)", "\\(\\frac{1}{2}(\\hat{i}+\\hat{j})\\)", "\\(2\\hat{i}\\)"],
                correct: 1,
                explanation: "A unit vector has magnitude 1. For \\(\\frac{1}{\\sqrt{2}}(\\hat{i}+\\hat{j})\\): magnitude = \\(\\sqrt{(\\frac{1}{\\sqrt{2}})^2+(\\frac{1}{\\sqrt{2}})^2} = \\sqrt{\\frac{1}{2}+\\frac{1}{2}} = \\sqrt{1} = 1\\)."
            },
            {
                question: "Solution of \\(|x-3| < 5\\) is:",
                options: ["\\(-2 < x < 8\\)", "\\(x < 8\\)", "\\(x > -2\\)", "\\(2 < x < 8\\)"],
                correct: 0,
                explanation: "\\(|x-3| < 5 \\Rightarrow -5 < x-3 < 5 \\Rightarrow -5+3 < x < 5+3 \\Rightarrow -2 < x < 8\\)."
            }
        ];

        // Initialize the test
        document.addEventListener('DOMContentLoaded', function() {
            const testContainer = document.getElementById('testContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const submitBtn = document.getElementById('submitBtn');
            const resetBtn = document.getElementById('resetBtn');
            
            // Function to render LaTeX in an element
            function renderMath(element) {
                if (element) {
                    renderMathInElement(element, {
                        delimiters: [
                            {left: "$$", right: "$$", display: true},
                            {left: "$", right: "$", display: false},
                            {left: "\\(", right: "\\)", display: false},
                            {left: "\\[", right: "\\]", display: true}
                        ],
                        throwOnError: false
                    });
                }
            }
            
            // Create question elements
            mcqData.forEach((questionData, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.innerHTML = `
                    <div class="question-text">
                        <span class="question-number">${index + 1}</span>
                        <span>${questionData.question}</span>
                    </div>
                    <div class="options-container" id="options-${index}">
                        ${questionData.options.map((option, optIndex) => `
                            <div class="option" data-qid="${index}" data-opt="${optIndex}">
                                <span class="option-label">${String.fromCharCode(65 + optIndex)}</span>
                                <div class="option-content">${option}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                testContainer.appendChild(questionDiv);
                
                // Render math in the question and options
                setTimeout(() => {
                    renderMath(questionDiv);
                }, 100);
            });
            
            // Add click event to options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const qid = this.dataset.qid;
                    const optIndex = this.dataset.opt;
                    
                    // Remove selected class from all options in this question
                    document.querySelectorAll(`.option[data-qid="${qid}"]`).forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Store the selected answer
                    if (!window.userAnswers) window.userAnswers = {};
                    window.userAnswers[qid] = parseInt(optIndex);
                });
            });
            
            // Submit button click event
            submitBtn.addEventListener('click', function() {
                if (!window.userAnswers || Object.keys(window.userAnswers).length < mcqData.length) {
                    if (confirm(`You have only answered ${window.userAnswers ? Object.keys(window.userAnswers).length : 0} out of ${mcqData.length} questions. Do you still want to submit?`)) {
                        showResults();
                    }
                } else {
                    showResults();
                }
            });
            
            // Reset button click event
            resetBtn.addEventListener('click', function() {
                if (confirm("Are you sure you want to reset the test? All your answers will be cleared.")) {
                    resetTest();
                }
            });
            
            // Function to show results
            function showResults() {
                // Initialize userAnswers if not exists
                if (!window.userAnswers) window.userAnswers = {};
                
                // Calculate score
                let correctCount = 0;
                let resultsHTML = '';
                
                mcqData.forEach((questionData, index) => {
                    const userAnswer = window.userAnswers[index];
                    const isCorrect = userAnswer === questionData.correct;
                    
                    if (isCorrect) correctCount++;
                    
                    // Create result item
                    const resultClass = isCorrect ? 'correct' : 'incorrect';
                    const userAnswerText = userAnswer !== undefined ? 
                        `${String.fromCharCode(65 + userAnswer)}: ${questionData.options[userAnswer]}` : 
                        "Not answered";
                    const correctAnswerText = `${String.fromCharCode(65 + questionData.correct)}: ${questionData.options[questionData.correct]}`;
                    
                    resultsHTML += `
                        <div class="result-item ${resultClass}">
                            <div class="result-question">Q${index + 1}: ${questionData.question}</div>
                            <div class="result-answer">
                                <span class="result-label">Your Answer:</span>
                                <span class="result-value">${userAnswerText}</span>
                            </div>
                            <div class="result-answer">
                                <span class="result-label">Correct Answer:</span>
                                <span class="result-value">${correctAnswerText}</span>
                            </div>
                            <div class="result-explanation">
                                <strong>Explanation:</strong> ${questionData.explanation}
                            </div>
                        </div>
                    `;
                });
                
                // Calculate percentage
                const percentage = Math.round((correctCount / mcqData.length) * 100);
                
                // Update results container
                resultsContainer.innerHTML = `
                    <div class="results-header">
                        <div class="score-circle">
                            <div class="score-value">${correctCount}/${mcqData.length}</div>
                            <div class="score-text">${percentage}%</div>
                        </div>
                        <h2>Test Results</h2>
                        <p>${percentage >= 70 ? 'Great job! You passed the test!' : 
                           percentage >= 50 ? 'Good effort! Review the explanations below.' : 
                           'Keep practicing! Review the explanations below.'}</p>
                    </div>
                    <div class="summary">
                        <div class="summary-item">
                            <div class="summary-value correct">${correctCount}</div>
                            <div class="summary-label">Correct Answers</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-value incorrect">${mcqData.length - correctCount}</div>
                            <div class="summary-label">Incorrect Answers</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-value">${percentage}%</div>
                            <div class="summary-label">Percentage</div>
                        </div>
                    </div>
                    <h3 style="margin: 30px 0 15px 0; color: #2c3e50;">Question-wise Results:</h3>
                    ${resultsHTML}
                    <div style="text-align: center; margin-top: 30px;">
                        <button id="retakeBtn" style="padding: 12px 30px; background-color: #4a6491; color: white; border: none; border-radius: 6px; cursor: pointer;">
                            <i class="fas fa-redo-alt"></i> Retake Test
                        </button>
                    </div>
                `;
                
                // Show results and hide test
                testContainer.style.display = 'none';
                document.querySelector('.buttons-container').style.display = 'none';
                resultsContainer.style.display = 'block';
                
                // Render math in results
                setTimeout(() => {
                    renderMath(resultsContainer);
                }, 100);
                
                // Add event to retake button
                document.getElementById('retakeBtn').addEventListener('click', function() {
                    resetTest();
                });
                
                // Scroll to top
                window.scrollTo(0, 0);
            }
            
            // Function to reset the test
            function resetTest() {
                // Clear user answers
                window.userAnswers = {};
                
                // Clear all selected options
                document.querySelectorAll('.option').forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                // Show test and hide results
                testContainer.style.display = 'block';
                document.querySelector('.buttons-container').style.display = 'flex';
                resultsContainer.style.display = 'none';
                
                // Scroll to top
                window.scrollTo(0, 0);
            }
        });
    </script>
</body>
</html>